# grept

`grept` stands for GoREPositorylinTer.

`grept` is a powerful, extensible linting tool for repositories. Inspired by [RepoLinter](https://github.com/todogroup/repolinter), `grept` is designed to ensure that your repositories follow certain predefined standards. It parses and evaluates configuration files, generates plans based on the specified configuration, and applies the plans. This makes it an excellent tool for maintaining consistency and quality in your codebase.

`grept` is written in Golang, using cobra for command-line interface and afero for file system abstraction. This makes it both highly extensible and testable.

## Installation

You can install `grept` directly using the `go install` command:

```
go install github.com/Azure/grept@latest
```

Please make sure you have Go installed and your `GOPATH` properly set up.

## How to use

`grept` supports two commands: `plan` and `apply`.

### Plan Command

The `plan` command generates a plan based on the specified configuration. 

```
grept plan [config_file]
```

Replace `[config_file]` with your configuration file path. The `plan` command will parse the configuration file and generate a plan. If all rule checks are successful, it will print \"All rule checks successful, nothing to do.\" Otherwise, it will print the plan.

### Apply Command

The `apply` command applies the plan generated by the `plan` command.

```
grept apply [config_file]
```

Replace `[config_file]` with your configuration file path. The `apply` command will apply the fixes to the issues found by the `plan` command. If all fixes are applied successfully, it will print \"Plan applied successfully.\"

You can use the `-a` or `--auto` flag to apply fixes without confirmation.

```
grept apply -a [config_file]
```

## Example

The following example config file would ensure that your repository contains a MIT license file:

```hcl
data http mit_license {
  url = "https://raw.githubusercontent.com/Azure/terraform-verified-module/main/LICENSE"
}

rule file_hash license {
  glob = "LICENSE"
  hash = sha1(data.http.mit_license.response_body)
}

fix local_file license {
  rule_id = rule.file_hash.license.id
  path = "LICENSE"
  content = data.http.mit_license.response_body
}
```

## Functions

All [built-in functions](https://developer.hashicorp.com/packer/docs/templates/hcl_templates/functions) provided by [HashiCorp Packer](https://www.packer.io/) are available.

## Contributing

Contributions to `grept` are welcome! Please submit a pull request or issue on the [grept GitHub page](https://github.com/Azure/grept). 

## License

`grept` is released under the MIT license. For more information, see [LICENSE](https://github.com/Azure/grept/blob/main/LICENSE).